/* ================================
   Celestia UI Template
   DaisyUI 5 + Tailwind CSS 4
   Fantasy LLM Playground Theme
   ================================ */

@import "tailwindcss";
@plugin "daisyui";

/* ================================
   Custom Light Theme - Celestia Light
   ================================ */
@plugin "daisyui/theme" {
  name: "celestia-light";
  default: true;
  color-scheme: light;

  /* Fantasy violet/pink color scheme */
  --color-primary: oklch(50% 0.22 280);
  --color-primary-content: oklch(98% 0.01 280);
  --color-secondary: oklch(55% 0.20 330);
  --color-secondary-content: oklch(98% 0.01 330);
  --color-accent: oklch(55% 0.18 220);
  --color-accent-content: oklch(98% 0.01 220);
  --color-neutral: oklch(25% 0.03 280);
  --color-neutral-content: oklch(98% 0.01 280);

  /* Light base colors with subtle violet tint */
  --color-base-100: oklch(99% 0.005 280);
  --color-base-200: oklch(96% 0.01 280);
  --color-base-300: oklch(92% 0.02 280);
  --color-base-content: oklch(20% 0.05 280);
  
  /* Secondary content color for better contrast (65% brightness difference) */
  --color-base-content-secondary: oklch(35% 0.04 280);

  /* Status colors */
  --color-info: oklch(65% 0.18 240);
  --color-info-content: oklch(98% 0.01 240);
  --color-success: oklch(65% 0.20 145);
  --color-success-content: oklch(98% 0.01 145);
  --color-warning: oklch(78% 0.18 70);
  --color-warning-content: oklch(25% 0.05 70);
  --color-error: oklch(60% 0.22 25);
  --color-error-content: oklch(98% 0.01 25);

  /* iOS-style large radius */
  --radius-selector: 2rem;
  --radius-field: 2rem;
  --radius-box: 2rem;

  --size-selector: 0.25rem;
  --size-field: 0.25rem;
  --border: 1px;
  --depth: 1;
  --noise: 0;
}

/* ================================
   Custom Dark Theme - Celestia Dark
   ================================ */
@plugin "daisyui/theme" {
  name: "celestia-dark";
  prefersdark: true;
  color-scheme: dark;

  /* Fantasy violet/pink - darker variants */
  --color-primary: oklch(68% 0.20 280);
  --color-primary-content: oklch(15% 0.02 280);
  --color-secondary: oklch(72% 0.18 330);
  --color-secondary-content: oklch(15% 0.02 330);
  --color-accent: oklch(70% 0.16 220);
  --color-accent-content: oklch(15% 0.02 220);
  --color-neutral: oklch(80% 0.02 280);
  --color-neutral-content: oklch(20% 0.02 280);

  /* Dark base colors with deep purple tint */
  --color-base-100: oklch(18% 0.025 280);
  --color-base-200: oklch(22% 0.03 280);
  --color-base-300: oklch(26% 0.035 280);
  --color-base-content: oklch(92% 0.02 280);
  
  /* Secondary content color for better contrast (65% brightness) */
  --color-base-content-secondary: oklch(65% 0.03 280);

  /* Status colors - brighter for dark mode */
  --color-info: oklch(70% 0.16 240);
  --color-info-content: oklch(15% 0.02 240);
  --color-success: oklch(70% 0.18 145);
  --color-success-content: oklch(15% 0.02 145);
  --color-warning: oklch(80% 0.16 70);
  --color-warning-content: oklch(20% 0.05 70);
  --color-error: oklch(68% 0.20 25);
  --color-error-content: oklch(15% 0.02 25);

  /* iOS-style large radius */
  --radius-selector: 2rem;
  --radius-field: 2rem;
  --radius-box: 2rem;

  --size-selector: 0.25rem;
  --size-field: 0.25rem;
  --border: 1px;
  --depth: 1;
  --noise: 0;
}

/* ================================
   Iconify Plugin for Lucide Icons
   ================================ */
@plugin "@iconify/tailwind4" {
  prefixes: lucide;
}

/* ================================
   Motion Plugin
   ================================ */
@plugin "tailwindcss-motion";

/* ================================
   Global Styles
   ================================ */
html {
  scroll-behavior: smooth;
  /* Improve text rendering for CJK */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  min-height: 100vh;
  overflow-x: hidden;
  /* CJK font stack: Inter for Latin, Noto Sans SC for Chinese */
  font-family: 'Inter', 'Noto Sans SC', 'Hiragino Sans', 'Microsoft YaHei', system-ui, sans-serif;
  /* Improve CJK text rendering */
  font-feature-settings: 'palt' 1;
  text-rendering: optimizeLegibility;
  /* Better line height for mixed CJK/Latin text */
  line-height: 1.75;
}

/* ================================
   CJK Typography Utilities
   ================================ */
/* Japanese-specific text styles */
:lang(ja) {
  line-height: 1.8;
  word-break: normal;
  overflow-wrap: anywhere;
}

/* Chinese-specific text styles */
:lang(zh), :lang(zh-CN), :lang(zh-TW) {
  line-height: 1.75;
  word-break: normal;
}

/* Proper punctuation spacing for CJK */
.text-cjk-optimize {
  font-feature-settings: 'palt' 1, 'kern' 1;
  text-spacing-trim: space-all;
  hanging-punctuation: allow-end;
}

/* For vertical writing (optional, useful for Japanese) */
.writing-vertical {
  writing-mode: vertical-rl;
  text-orientation: mixed;
}

/* Better paragraph spacing for CJK content */
.prose-cjk p {
  margin-bottom: 1.5em;
  text-indent: 2em;
}

.prose-cjk p:first-child {
  text-indent: 0;
}

/* Selection styling - violet tint */
::selection {
  background: oklch(68% 0.22 280 / 0.3);
  color: oklch(25% 0.04 280);
}

/* Focus visible styling - improved visibility */
:focus-visible {
  outline: 2px solid oklch(60% 0.24 280 / 0.8);
  outline-offset: 2px;
}

/* Secondary content text utility class */
.text-content-secondary {
  color: var(--color-base-content-secondary);
}

/* ================================
   Animated Gradient Background
   ================================ */
.bg-celestia-gradient {
  background: linear-gradient(
    135deg,
    oklch(88% 0.15 350) 0%,
    oklch(90% 0.12 320) 25%,
    oklch(88% 0.15 280) 50%,
    oklch(90% 0.12 230) 75%,
    oklch(88% 0.15 350) 100%
  );
  background-size: 400% 400%;
  animation: gradient-flow 15s ease infinite;
}

/* Dark mode background */
[data-theme="celestia-dark"] .bg-celestia-gradient,
[data-theme="celestia-dark"].bg-celestia-gradient {
  background: linear-gradient(
    135deg,
    oklch(18% 0.10 350) 0%,
    oklch(15% 0.12 300) 25%,
    oklch(18% 0.10 280) 50%,
    oklch(15% 0.12 250) 75%,
    oklch(18% 0.10 350) 100%
  );
}

@keyframes gradient-flow {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* ================================
   Glass Panel Effects (iOS/VisionOS style)
   ================================ */
.glass-panel {
  background: oklch(100% 0 0 / 0.65);
  backdrop-filter: blur(24px) saturate(180%);
  -webkit-backdrop-filter: blur(24px) saturate(180%);
  border: 1px solid oklch(100% 0 0 / 0.7);
  box-shadow: 0 8px 32px oklch(60% 0.15 280 / 0.1);
}

/* Lighter glass for inputs */
.glass-input {
  background: oklch(100% 0 0 / 0.5);
  border: 1px solid oklch(50% 0.1 280 / 0.3);
  transition: all 0.2s ease;
  color: oklch(20% 0.05 280);
}

.glass-input:focus {
  background: oklch(100% 0 0 / 0.75);
  border-color: oklch(50% 0.22 280 / 0.6);
  box-shadow: 0 0 0 3px oklch(50% 0.22 280 / 0.15);
}

.glass-input::placeholder {
  color: oklch(45% 0.05 280);
}

/* Glass input validation states */
.glass-input.input-success {
  border-color: oklch(65% 0.20 145 / 0.6);
}

.glass-input.input-error {
  border-color: oklch(60% 0.22 25 / 0.6);
}

/* Validator hint */
.validator-hint {
  min-height: 1.25rem;
}

/* ================================
   Custom Button Gradient
   ================================ */
.btn-gradient {
  background: linear-gradient(135deg, oklch(45% 0.24 280), oklch(50% 0.22 330));
  border: none;
  color: white;
  transition: all 0.2s ease;
  font-weight: 500;
}

.btn-gradient:hover {
  background: linear-gradient(135deg, oklch(40% 0.26 280), oklch(45% 0.24 330));
  transform: translateY(-1px);
  box-shadow: 0 8px 24px oklch(45% 0.24 280 / 0.4);
}

.btn-gradient:active {
  transform: translateY(0);
}

/* ================================
   Gradient Text
   ================================ */
.text-gradient {
  background: linear-gradient(135deg, oklch(45% 0.25 280), oklch(50% 0.22 330), oklch(50% 0.20 30));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* ================================
   Chat Bubble Styling
   ================================ */
.chat-bubble-story {
  /* Serif stack for story/narrative content */
  font-family: 'Merriweather', 'Noto Serif JP', 'Noto Serif SC', 'Hiragino Mincho ProN', 'Yu Mincho', Georgia, serif;
  line-height: 1.8;
  /* Better spacing for CJK mixed text */
  letter-spacing: 0.02em;
}

/* ================================
   Chat Bubble Custom Styling
   Override DaisyUI default to work with 2rem radius theme
   ================================ */

/* Hide the default DaisyUI chat bubble tail */
.chat-bubble-ai::before,
.chat-bubble-user::before {
  display: none !important;
}

/* Base chat bubble styling */
.chat .chat-bubble {
  border-radius: 2rem;
}

/* AI chat bubble - left side, small notch on bottom-left near avatar */
.chat-start .chat-bubble.chat-bubble-ai {
  border-radius: 2rem;
  border-bottom-left-radius: 0.25rem;
}

/* User chat bubble - right side, small notch on bottom-right */
.chat-end .chat-bubble.chat-bubble-user {
  border-radius: 2rem;
  border-bottom-right-radius: 0.25rem;
}

.chat-bubble-ai {
  background: oklch(100% 0 0 / 0.7);
  backdrop-filter: blur(12px);
  border: 1px solid oklch(100% 0 0 / 0.5);
  color: oklch(25% 0.03 280);
}

.chat-bubble-user {
  background: linear-gradient(135deg, oklch(58% 0.22 280), oklch(55% 0.20 300));
  color: white;
  border: none;
  box-shadow: 0 4px 16px oklch(58% 0.22 280 / 0.3);
}

/* ================================
   Card Hover Effect
   ================================ */
.card-hover {
  transition: all 0.3s ease;
}

.card-hover:hover {
  transform: translateY(-4px);
  box-shadow: 0 20px 40px oklch(60% 0.15 280 / 0.15);
}

/* ================================
   Avatar Ring Gradient
   ================================ */
.avatar-ring-gradient {
  background: linear-gradient(135deg, oklch(58% 0.22 280), oklch(68% 0.20 330));
  padding: 3px;
  border-radius: 50%;
}

.avatar-ring-gradient > * {
  border-radius: 50%;
}

/* ================================
   Hide Scrollbar (keep functionality)
   ================================ */
.no-scrollbar::-webkit-scrollbar {
  display: none;
}

.no-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

/* ================================
   Floating Orbs Animation (decorative)
   ================================ */
.floating-orb {
  position: absolute;
  border-radius: 50%;
  filter: blur(60px);
  opacity: 0.4;
  animation: float-orb 20s ease-in-out infinite;
}

.floating-orb-1 {
  background: oklch(75% 0.15 330);
  width: 300px;
  height: 300px;
  top: -100px;
  left: -100px;
  animation-delay: 0s;
}

.floating-orb-2 {
  background: oklch(70% 0.15 280);
  width: 400px;
  height: 400px;
  bottom: -150px;
  right: -150px;
  animation-delay: -7s;
}

.floating-orb-3 {
  background: oklch(75% 0.12 220);
  width: 250px;
  height: 250px;
  top: 50%;
  left: 50%;
  animation-delay: -14s;
}

/* Disable floating orbs on mobile for performance */
@media (max-width: 768px) {
  .floating-orb {
    display: none;
  }
}

@keyframes float-orb {
  0%, 100% {
    transform: translate(0, 0) scale(1);
  }
  25% {
    transform: translate(30px, -30px) scale(1.05);
  }
  50% {
    transform: translate(-20px, 20px) scale(0.95);
  }
  75% {
    transform: translate(20px, 10px) scale(1.02);
  }
}

/* ================================
   Toast Animations
   ================================ */
.toast-enter {
  animation: toast-slide-in 0.3s ease-out;
}

.toast-exit {
  animation: toast-slide-out 0.3s ease-in;
}

@keyframes toast-slide-in {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes toast-slide-out {
  from {
    transform: translateX(0);
    opacity: 1;
  }
  to {
    transform: translateX(100%);
    opacity: 0;
  }
}

/* ================================
   Mobile Menu
   ================================ */
[data-mobile-menu].open {
  pointer-events: auto !important;
}

[data-mobile-menu-overlay] {
  pointer-events: none;
}

[data-mobile-menu-overlay].open {
  pointer-events: auto !important;
  opacity: 1 !important;
}

[data-mobile-menu].open > div:last-child {
  /* Tailwind CSS 4 uses native translate property instead of transform */
  translate: 0 0 !important;
  opacity: 1 !important;
}

/* ================================
   Page Transitions
   ================================ */
.page-enter {
  animation: page-fade-in 0.4s ease-out;
}

@keyframes page-fade-in {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ================================
   Form Field Enhancement
   ================================ */
.input,
.select,
.textarea {
  transition: all 0.2s ease;
}

.input:focus,
.select:focus,
.textarea:focus {
  border-color: oklch(58% 0.22 280 / 0.5);
  box-shadow: 0 0 0 3px oklch(58% 0.22 280 / 0.1);
}

/* ================================
   Dark Mode Adjustments via data-theme
   ================================ */
[data-theme="celestia-dark"] .glass-panel {
  background: oklch(20% 0.02 280 / 0.6);
  border-color: oklch(100% 0 0 / 0.1);
  box-shadow: 
    0 8px 32px oklch(0% 0 0 / 0.3),
    inset 0 1px 0 oklch(100% 0 0 / 0.05);
}

[data-theme="celestia-dark"] .glass-input {
  background: oklch(25% 0.02 280 / 0.5);
  border-color: oklch(100% 0 0 / 0.15);
  color: oklch(92% 0.02 280);
}

[data-theme="celestia-dark"] .glass-input::placeholder {
  color: oklch(60% 0.03 280);
}

[data-theme="celestia-dark"] .glass-input:focus {
  background: oklch(28% 0.02 280 / 0.7);
}

/* Fix select dropdown in dark mode */
[data-theme="celestia-dark"] .select {
  background-color: oklch(22% 0.03 280);
  color: oklch(92% 0.02 280);
}

[data-theme="celestia-dark"] .select option {
  background-color: oklch(22% 0.03 280);
  color: oklch(92% 0.02 280);
}

[data-theme="celestia-dark"] .chat-bubble-ai {
  background: oklch(25% 0.02 280 / 0.85);
  border-color: oklch(100% 0 0 / 0.1);
  color: oklch(92% 0.02 280);
}

[data-theme="celestia-dark"] .floating-orb {
  opacity: 0.25;
}

/* ================================
   Chat Sidebar Tabs - Full Width
   ================================ */
.chat-sidebar .tabs-box {
  width: 100%;
  display: flex;
}

/* Active tab styling - enhanced for glass effect */
.chat-sidebar .tabs-box .tab:checked,
.chat-sidebar .tabs-box .tab[aria-selected="true"] {
  background: oklch(100% 0 0 / 0.6);
}

[data-theme="celestia-dark"] .chat-sidebar .tabs-box .tab:checked,
[data-theme="celestia-dark"] .chat-sidebar .tabs-box .tab[aria-selected="true"] {
  background: oklch(100% 0 0 / 0.15);
}

/* ================================
   Chat Sidebar Styles
   ================================ */
.chat-sidebar {
  transition: transform 0.3s ease, opacity 0.3s ease;
}

/* Left sidebar - slides from left */
.chat-sidebar-left {
  display: flex;
  transform: translateX(-100%);
  opacity: 0;
  pointer-events: none;
}

/* Right sidebar - slides from right */
.chat-sidebar-right {
  display: flex;
  transform: translateX(100%);
  opacity: 0;
  pointer-events: none;
}

/* Mobile: hide sidebars completely when not visible to prevent flex space occupation */
@media (max-width: 1023px) {
  .chat-sidebar-left {
    display: none;
  }
  
  .chat-sidebar-left[data-visible="true"] {
    display: flex;
    position: fixed;
    top: 0;
    bottom: 0;
    left: 0;
    z-index: 40;
    transform: translateX(0);
    opacity: 1;
    pointer-events: auto;
  }
}

@media (max-width: 1279px) {
  .chat-sidebar-right {
    display: none;
  }
  
  .chat-sidebar-right[data-visible="true"] {
    display: flex;
    position: fixed;
    top: 0;
    bottom: 0;
    right: 0;
    z-index: 40;
    transform: translateX(0);
    opacity: 1;
    pointer-events: auto;
  }
}

/* Auto mode: responsive behavior - show on large screens */
@media (min-width: 1024px) {
  .chat-sidebar-left {
    display: flex;
  }
  
  .chat-sidebar-left[data-visible="auto"] {
    transform: translateX(0);
    opacity: 1;
    pointer-events: auto;
  }
}

@media (min-width: 1280px) {
  .chat-sidebar-right {
    display: flex;
  }
  
  .chat-sidebar-right[data-visible="auto"] {
    transform: translateX(0);
    opacity: 1;
    pointer-events: auto;
  }
}

/* Explicit show */
.chat-sidebar-left[data-visible="true"] {
  transform: translateX(0);
  opacity: 1;
  pointer-events: auto;
}

.chat-sidebar-right[data-visible="true"] {
  transform: translateX(0);
  opacity: 1;
  pointer-events: auto;
}

/* Explicit hide */
.chat-sidebar-left[data-visible="false"] {
  transform: translateX(-100%);
  opacity: 0;
  pointer-events: none;
}

.chat-sidebar-right[data-visible="false"] {
  transform: translateX(100%);
  opacity: 0;
  pointer-events: none;
}

/* ================================
   Chat Message Animation
   ================================ */
.chat-message {
  animation: message-appear 0.3s ease-out;
}

@keyframes message-appear {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ================================
   Reduced Motion Support
   For users who prefer reduced motion
   ================================ */
@media (prefers-reduced-motion: reduce) {
  /* Disable background gradient animation */
  .bg-celestia-gradient {
    animation: none;
    background-size: 100% 100%;
  }
  
  /* Disable floating orbs */
  .floating-orb {
    animation: none;
    display: none;
  }
  
  /* Disable chat message animation */
  .chat-message {
    animation: none;
  }
  
  /* Disable toast animations */
  .toast-enter,
  .toast-exit {
    animation: none;
  }
  
  /* Disable page transition animation */
  .page-enter {
    animation: none;
  }
  
  /* Disable card hover transforms */
  .card-hover:hover {
    transform: none;
  }
  
  /* Reduce all transitions to near-instant */
  *,
  *::before,
  *::after {
    transition-duration: 0.01ms !important;
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
  }
}
